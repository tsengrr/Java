# TF-IDF 搜尋引擎

## 項目簡介
本項目實現了一個基於 TF-IDF（Term Frequency-Inverse Document Frequency）算法的簡單搜尋引擎，支持「AND」和「OR」邏輯查詢。

系統主要包括三個部分：
1. **索引建構（BuildIndex）**
2. **索引儲存（CustomBinaryExample）**
3. **查詢處理（TFIDFSearch）**

---

## 目錄結構
```bash
.
├── BuildIndex.java           # 用於處理文本文件並建立索引
├── CustomBinaryExample.java  # 用於序列化和反序列化索引
├── Indexer.java              # 索引器，包含 Trie 結構和操作
├── TFIDFSearch.java          # 用於處理 TF-IDF 查詢
└── README.md                 # 本文檔
```

---

## 功能概述

### 1. 索引建構 (BuildIndex)
- 從文本文件讀取資料，並根據每個文件的內容構建詞頻（Trie 結構）。
- 每個文件中的文本會進行分詞並插入到相應的 Trie 中。
- 完成索引建構後，`Indexer` 對象會被序列化並儲存在磁碟上，供後續查詢使用。

### 2. 查詢處理 (TFIDFSearch)
- 支持 AND 和 OR 查詢：
  - **AND 查詢**：返回同時包含所有查詢詞的文件。
  - **OR 查詢**：返回包含任意查詢詞的文件。
- 查詢結果將根據 TF-IDF 值排序。
  - **TF-IDF 值高的文件靠前**。
  - **若 TF-IDF 值相同，則按文檔 ID 排序**。

### 3. 序列化與反序列化 (CustomBinaryExample)
- 為提高效能，索引會被序列化為 `.ser` 文件。
- 查詢階段可快速載入索引，避免每次查詢時重建索引。

---

## 使用方式

### 1. 建立索引
運行 `BuildIndex` 來從文本檔案中建立索引。

#### 命令行操作：
```bash
javac BuildIndex.java
java BuildIndex <file_path>
```
- `<file_path>`：輸入的文本文件，每 5 行作為一個文本單位。
- 索引將被序列化為 `.ser` 文件。

### 2. 查詢處理
運行 `TFIDFSearch` 來進行查詢處理。

#### 命令行操作：
```bash
javac TFIDFSearch.java
java TFIDFSearch <index_file> <query_file>
```
- `<index_file>`：預先建立的索引文件（`*.ser`）。
- `<query_file>`：包含查詢的文件，每一行為一次查詢。

#### 查詢文件格式：
```
n
query1
query2
...
```
- `n`：表示每個查詢需要返回的結果數量。
- **支持的查詢格式**：
  - `word1 AND word2`（返回同時包含 `word1` 和 `word2` 的文件）。
  - `word1 OR word2`（返回包含 `word1` 或 `word2` 的文件）。

### 3. 結果輸出
- 查詢結果將輸出到 `output.txt`，並按 **TF-IDF 值排序**。
- 若 **無匹配文檔**，則返回 `-1`。

---

## 程式運作流程
1. **文本處理與分詞**：
   - 使用正則表達式清理非字母字符，並轉換為小寫。
   - 每 5 行文本作為一個文檔，存入 Trie 結構。
2. **索引建構與序列化**：
   - 依據文檔內容建立 Trie 結構。
   - 序列化為 `.ser` 文件，供查詢使用。
3. **查詢處理與 TF-IDF 計算**：
   - 根據查詢解析 `AND` 或 `OR` 邏輯。
   - 計算 TF-IDF 值，排序並返回最相關的文檔。

---

## 設計選擇
### ✅ 並行處理
- 查詢處理階段使用 **parallelStream()** 來加速檢索與 TF-IDF 計算。
- 在大規模文檔集上可顯著提高查詢性能。

### ✅ Trie 結構
- **高效存儲詞頻資訊**，加速查詢操作。

### ✅ 索引序列化
- 避免重複建構索引，提高查詢效率。

---

## 已知限制
- **大文檔處理**：
  - 若文檔過大，內存使用可能過高。
  - 可考慮優化索引結構或使用外部存儲方案。
- **並行處理開銷**：
  - 過多的並行操作可能導致性能下降，具體效果依賴於查詢大小與硬件環境。

---

## 未來改進
- 支持 **更複雜的查詢語法**（如加權查詢、範圍查詢）。
- **優化索引結構**，支持模糊查詢與更多類型的檢索。

---


